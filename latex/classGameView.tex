\hypertarget{classGameView}{}\doxysection{Game\+View Class Reference}
\label{classGameView}\index{GameView@{GameView}}


The \mbox{\hyperlink{classGameView}{Game\+View}} class is the scene where all the visuals of the world are placed.  




{\ttfamily \#include $<$gameview.\+h$>$}



Inheritance diagram for Game\+View\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=289pt]{classGameView__inherit__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classGameView_a910d07857d706e405f3fc28e8d4eb2a8}{data\+Changed}} (QMap$<$ \mbox{\hyperlink{namespace__pub_a4b113076a0d9baa622ddf9a4e4b35c19}{Data\+Role}}, QVariant $>$ object\+Data)
\begin{DoxyCompactList}\small\item\em data\+Changed is the slot to monitor the change of properties of any object in the scene. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classGameView_ad5372c6e45bb385619444f21fbd09a23}{Game\+View}} (\mbox{\hyperlink{classQObject}{QObject}} $\ast$parent=nullptr)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{classGameView}{Game\+View}} constructor which is explicit for safety purposes. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classGameView_a64021906798c8b3e083e2c43b246fb4f}{create\+Scene}} (const QList$<$ QList$<$ QList$<$ QMap$<$ \mbox{\hyperlink{namespace__pub_a4b113076a0d9baa622ddf9a4e4b35c19}{Data\+Role}}, QVariant $>$$>$$>$$>$ \&game\+Objects, QShared\+Pointer$<$ \mbox{\hyperlink{classRenderer}{Renderer}} $>$ renderer=nullptr)
\begin{DoxyCompactList}\small\item\em create\+Scene creates the full scene of the game\+Objects. passed to it to visualize based on the renderer to use. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classGameView_a414c4ad5b8b3bf4845c762218ccdf96f}{set\+Renderer}} (QShared\+Pointer$<$ \mbox{\hyperlink{classRenderer}{Renderer}} $>$ new\+Renderer)
\begin{DoxyCompactList}\small\item\em set\+Renderer sets \mbox{\hyperlink{classRenderer}{Renderer}}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classGamePixmapItem}{Game\+Pixmap\+Item}} $\ast$ \mbox{\hyperlink{classGameView_ac81c37ebce8a678f8d26fadcd2b3b781}{get\+Pixmap\+Item}} (int x, int y, QVariant type)
\begin{DoxyCompactList}\small\item\em get\+Pixmap\+Item gets a pxmp from the list in a point. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
QShared\+Pointer$<$ \mbox{\hyperlink{classRenderer}{Renderer}} $>$ \mbox{\hyperlink{classGameView_aa6ff11a8860fce6a61e3558992aea16c}{m\+\_\+renderer}}
\begin{DoxyCompactList}\small\item\em m\+\_\+renderer stores the current \mbox{\hyperlink{classRenderer}{Renderer}} of the scene. \end{DoxyCompactList}\item 
QList$<$ QList$<$ \mbox{\hyperlink{classGamePixmapItem}{Game\+Pixmap\+Item}} $\ast$ $>$ $>$ \mbox{\hyperlink{classGameView_a6ad14ff4191ec0a99b6814088f90e870}{m\+\_\+tiles}}
\begin{DoxyCompactList}\small\item\em m\+\_\+tiles Store the graphical representation of each \mbox{\hyperlink{classGameObject}{Game\+Object}} \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{classGameView}{Game\+View}} class is the scene where all the visuals of the world are placed. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classGameView_ad5372c6e45bb385619444f21fbd09a23}\label{classGameView_ad5372c6e45bb385619444f21fbd09a23}} 
\index{GameView@{GameView}!GameView@{GameView}}
\index{GameView@{GameView}!GameView@{GameView}}
\doxysubsubsection{\texorpdfstring{GameView()}{GameView()}}
{\footnotesize\ttfamily Game\+View\+::\+Game\+View (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classQObject}{QObject}} $\ast$}]{parent = {\ttfamily nullptr} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



\mbox{\hyperlink{classGameView}{Game\+View}} constructor which is explicit for safety purposes. 


\begin{DoxyParams}{Parameters}
{\em parent} & is the parent of the \mbox{\hyperlink{classGameView}{Game\+View}} which is \mbox{\hyperlink{classGameController}{Game\+Controller}} that inherits from \mbox{\hyperlink{classQGraphicsView}{QGraphics\+View}}. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{6     : \mbox{\hyperlink{classQGraphicsScene}{QGraphicsScene}}(parent) \{}
\DoxyCodeLine{7     \textcolor{comment}{// Initialize the m\_tiles with empty shared pointers}}
\DoxyCodeLine{8 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classGameView_a64021906798c8b3e083e2c43b246fb4f}\label{classGameView_a64021906798c8b3e083e2c43b246fb4f}} 
\index{GameView@{GameView}!createScene@{createScene}}
\index{createScene@{createScene}!GameView@{GameView}}
\doxysubsubsection{\texorpdfstring{createScene()}{createScene()}}
{\footnotesize\ttfamily void Game\+View\+::create\+Scene (\begin{DoxyParamCaption}\item[{const QList$<$ QList$<$ QList$<$ QMap$<$ \mbox{\hyperlink{namespace__pub_a4b113076a0d9baa622ddf9a4e4b35c19}{Data\+Role}}, QVariant $>$$>$$>$$>$ \&}]{game\+Objects,  }\item[{QShared\+Pointer$<$ \mbox{\hyperlink{classRenderer}{Renderer}} $>$}]{renderer = {\ttfamily nullptr} }\end{DoxyParamCaption})}



create\+Scene creates the full scene of the game\+Objects. passed to it to visualize based on the renderer to use. 


\begin{DoxyParams}{Parameters}
{\em game\+Objects} & is the data of every object in the scene. \\
\hline
{\em renderer} & is the \mbox{\hyperlink{classRenderer}{Renderer}} to use to visualize. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{12                                      \{}
\DoxyCodeLine{13     \textcolor{keywordflow}{if}(renderer) \{}
\DoxyCodeLine{14         \mbox{\hyperlink{classGameView_a414c4ad5b8b3bf4845c762218ccdf96f}{setRenderer}}(renderer);}
\DoxyCodeLine{15     \}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17     \textcolor{keywordflow}{if}(!\mbox{\hyperlink{classGameView_a6ad14ff4191ec0a99b6814088f90e870}{m\_tiles}}.empty()) \{}
\DoxyCodeLine{18         clear();}
\DoxyCodeLine{19     \}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21     \mbox{\hyperlink{classGameView_a6ad14ff4191ec0a99b6814088f90e870}{m\_tiles}} = QList<QList<GamePixmapItem *>>(gameObjects.size());}
\DoxyCodeLine{22 }
\DoxyCodeLine{23     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} x = 0; x < gameObjects.size(); ++x) \{}
\DoxyCodeLine{24         QList<GamePixmapItem *> rowItems(gameObjects[0].size());}
\DoxyCodeLine{25         \mbox{\hyperlink{classGameView_a6ad14ff4191ec0a99b6814088f90e870}{m\_tiles}}[x] = (rowItems);}
\DoxyCodeLine{26         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} y = 0; y < gameObjects[0].size(); ++y) \{}
\DoxyCodeLine{27             \textcolor{keywordflow}{if}(x < gameObjects.size() \&\& y < gameObjects[x].size() \&\& !gameObjects[x][y].empty()) \{}
\DoxyCodeLine{28                 \textcolor{keyword}{auto} *item = \mbox{\hyperlink{classGameView_aa6ff11a8860fce6a61e3558992aea16c}{m\_renderer}}-\/>renderGameObjects(gameObjects[x][y]);}
\DoxyCodeLine{29                 item-\/>setPos(x * item-\/>pixmap().width(), y * item-\/>pixmap().height());}
\DoxyCodeLine{30                 \mbox{\hyperlink{classGameView_a6ad14ff4191ec0a99b6814088f90e870}{m\_tiles}}[x][y] = item; \textcolor{comment}{// Store the shared pointer in m\_tiles}}
\DoxyCodeLine{31                 addItem(item);}
\DoxyCodeLine{32             \}}
\DoxyCodeLine{33         \}}
\DoxyCodeLine{34     \}}
\DoxyCodeLine{35 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classGameView_a910d07857d706e405f3fc28e8d4eb2a8}\label{classGameView_a910d07857d706e405f3fc28e8d4eb2a8}} 
\index{GameView@{GameView}!dataChanged@{dataChanged}}
\index{dataChanged@{dataChanged}!GameView@{GameView}}
\doxysubsubsection{\texorpdfstring{dataChanged}{dataChanged}}
{\footnotesize\ttfamily void Game\+View\+::data\+Changed (\begin{DoxyParamCaption}\item[{QMap$<$ \mbox{\hyperlink{namespace__pub_a4b113076a0d9baa622ddf9a4e4b35c19}{Data\+Role}}, QVariant $>$}]{object\+Data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



data\+Changed is the slot to monitor the change of properties of any object in the scene. 


\begin{DoxyParams}{Parameters}
{\em object\+Data} & is the changed data of the object. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{56                                                               \{}
\DoxyCodeLine{57     \textcolor{keyword}{auto} position = objectData[DataRole::Position].toPoint();}
\DoxyCodeLine{58     \textcolor{comment}{// The changes made here are only because the renderers have no access to the world.}}
\DoxyCodeLine{59     \textcolor{keywordflow}{if}(objectData[DataRole::LatestChange].value<DataRole>() == DataRole::Position) \{}
\DoxyCodeLine{60         \textcolor{comment}{// The direction tells us where the object moved to. Since the data stored in it}}
\DoxyCodeLine{61         \textcolor{comment}{// has the new position, we want to get the GamePixmapItem that is located in the tile}}
\DoxyCodeLine{62         \textcolor{comment}{// opposite to the movement direction.}}
\DoxyCodeLine{63         \textcolor{keywordtype}{double} direction = objectData[\mbox{\hyperlink{namespace__pub_aceb36dd0edefc86835061a00052d3ae0}{DataRole::Direction}}].toDouble();}
\DoxyCodeLine{64         \textcolor{keywordtype}{double} angleRad = -\/direction * M\_PI / 180.0;}
\DoxyCodeLine{65 }
\DoxyCodeLine{66         \textcolor{comment}{// Simple math, the angle is negative since (0,0) on an array is inverted wrt the}}
\DoxyCodeLine{67         \textcolor{comment}{// QGraphicsScene the scene fills up to down while the model fills down to up.}}
\DoxyCodeLine{68         \textcolor{keywordtype}{int} x = position.x() -\/ round(cos(angleRad));}
\DoxyCodeLine{69         \textcolor{keywordtype}{int} y = position.y() -\/ round(sin(angleRad));}
\DoxyCodeLine{70 }
\DoxyCodeLine{71         \textcolor{comment}{// Perhaps an ID would be better in this case.}}
\DoxyCodeLine{72         \textcolor{keyword}{auto} changedObject = \mbox{\hyperlink{classGameView_ac81c37ebce8a678f8d26fadcd2b3b781}{getPixmapItem}}(x, y, objectData[DataRole::Type]);}
\DoxyCodeLine{73 }
\DoxyCodeLine{74         QVariant type = QVariant::fromValue<ObjectType>(ObjectType::Tile);}
\DoxyCodeLine{75         changedObject-\/>setParentItem(\mbox{\hyperlink{classGameView_ac81c37ebce8a678f8d26fadcd2b3b781}{getPixmapItem}}(position.x(), position.y(), type));}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(objectData[DataRole::Destroyed].toBool()) \{}
\DoxyCodeLine{78         \textcolor{comment}{// This removes the object from the scene.}}
\DoxyCodeLine{79         \textcolor{keyword}{delete} \mbox{\hyperlink{classGameView_ac81c37ebce8a678f8d26fadcd2b3b781}{getPixmapItem}}(position.x(), position.y(), objectData[DataRole::Type]);}
\DoxyCodeLine{80     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{81         \textcolor{comment}{// For every other change we pass it to the renderer.}}
\DoxyCodeLine{82         \textcolor{keyword}{auto} *obj = \mbox{\hyperlink{classGameView_ac81c37ebce8a678f8d26fadcd2b3b781}{getPixmapItem}}(position.x(), position.y(), objectData[DataRole::Type]);}
\DoxyCodeLine{83         \mbox{\hyperlink{classGameView_aa6ff11a8860fce6a61e3558992aea16c}{m\_renderer}}-\/>renderGameObject(objectData, obj);}
\DoxyCodeLine{84     \}}
\DoxyCodeLine{85 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classGameView_ac81c37ebce8a678f8d26fadcd2b3b781}\label{classGameView_ac81c37ebce8a678f8d26fadcd2b3b781}} 
\index{GameView@{GameView}!getPixmapItem@{getPixmapItem}}
\index{getPixmapItem@{getPixmapItem}!GameView@{GameView}}
\doxysubsubsection{\texorpdfstring{getPixmapItem()}{getPixmapItem()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classGamePixmapItem}{Game\+Pixmap\+Item}} $\ast$ Game\+View\+::get\+Pixmap\+Item (\begin{DoxyParamCaption}\item[{int}]{x,  }\item[{int}]{y,  }\item[{QVariant}]{type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



get\+Pixmap\+Item gets a pxmp from the list in a point. 


\begin{DoxyParams}{Parameters}
{\em x} & coordinate on the 2D plane. \\
\hline
{\em y} & coordinate on the 2D plane. \\
\hline
{\em type} & the \mbox{\hyperlink{classGameObject}{Game\+Object}} type. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to the Pixmap. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{41                                                                    \{}
\DoxyCodeLine{42     \textcolor{keyword}{auto} tile = \mbox{\hyperlink{classGameView_a6ad14ff4191ec0a99b6814088f90e870}{m\_tiles}}[x][y];}
\DoxyCodeLine{43     \textcolor{keywordflow}{switch}(type.value<\mbox{\hyperlink{namespace__pub_aa1125206fd6742212fbe0423e12c9dbb}{ObjectType}}>()) \{}
\DoxyCodeLine{44     \textcolor{keywordflow}{case} ObjectType::Tile:}
\DoxyCodeLine{45         \textcolor{keywordflow}{return} tile;}
\DoxyCodeLine{46     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{47         \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} child : tile-\/>childItems()) \{}
\DoxyCodeLine{48             \textcolor{keywordflow}{if}(child-\/>data((\textcolor{keywordtype}{int})DataRole::Type) == type) \{}
\DoxyCodeLine{49                 \textcolor{keywordflow}{return} \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{classGamePixmapItem}{GamePixmapItem}} *\textcolor{keyword}{>}(child);}
\DoxyCodeLine{50             \}}
\DoxyCodeLine{51         \}}
\DoxyCodeLine{52         \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{53     \}}
\DoxyCodeLine{54 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classGameView_a414c4ad5b8b3bf4845c762218ccdf96f}\label{classGameView_a414c4ad5b8b3bf4845c762218ccdf96f}} 
\index{GameView@{GameView}!setRenderer@{setRenderer}}
\index{setRenderer@{setRenderer}!GameView@{GameView}}
\doxysubsubsection{\texorpdfstring{setRenderer()}{setRenderer()}}
{\footnotesize\ttfamily void Game\+View\+::set\+Renderer (\begin{DoxyParamCaption}\item[{QShared\+Pointer$<$ \mbox{\hyperlink{classRenderer}{Renderer}} $>$}]{new\+Renderer }\end{DoxyParamCaption})}



set\+Renderer sets \mbox{\hyperlink{classRenderer}{Renderer}}. 


\begin{DoxyParams}{Parameters}
{\em new\+Renderer} & is newly set \mbox{\hyperlink{classRenderer}{Renderer}} class to perform visualizations with. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{37                                                                \{}
\DoxyCodeLine{38     \mbox{\hyperlink{classGameView_aa6ff11a8860fce6a61e3558992aea16c}{m\_renderer}} = std::move(newRenderer);}
\DoxyCodeLine{39 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classGameView_aa6ff11a8860fce6a61e3558992aea16c}\label{classGameView_aa6ff11a8860fce6a61e3558992aea16c}} 
\index{GameView@{GameView}!m\_renderer@{m\_renderer}}
\index{m\_renderer@{m\_renderer}!GameView@{GameView}}
\doxysubsubsection{\texorpdfstring{m\_renderer}{m\_renderer}}
{\footnotesize\ttfamily QShared\+Pointer$<$\mbox{\hyperlink{classRenderer}{Renderer}}$>$ Game\+View\+::m\+\_\+renderer\hspace{0.3cm}{\ttfamily [private]}}



m\+\_\+renderer stores the current \mbox{\hyperlink{classRenderer}{Renderer}} of the scene. 

\mbox{\Hypertarget{classGameView_a6ad14ff4191ec0a99b6814088f90e870}\label{classGameView_a6ad14ff4191ec0a99b6814088f90e870}} 
\index{GameView@{GameView}!m\_tiles@{m\_tiles}}
\index{m\_tiles@{m\_tiles}!GameView@{GameView}}
\doxysubsubsection{\texorpdfstring{m\_tiles}{m\_tiles}}
{\footnotesize\ttfamily QList$<$QList$<$\mbox{\hyperlink{classGamePixmapItem}{Game\+Pixmap\+Item}} $\ast$$>$ $>$ Game\+View\+::m\+\_\+tiles\hspace{0.3cm}{\ttfamily [private]}}



m\+\_\+tiles Store the graphical representation of each \mbox{\hyperlink{classGameObject}{Game\+Object}} 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
view/\mbox{\hyperlink{gameview_8h}{gameview.\+h}}\item 
view/\mbox{\hyperlink{gameview_8cpp}{gameview.\+cpp}}\end{DoxyCompactItemize}
